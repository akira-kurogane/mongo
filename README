MongoDB README

This is a branch forked from MongoDB v4.0.3

UTILITIES

  ftdc_dump - Read FTDC metrics files, show their header data, export their timeseries metrics.

BUILDING

  You're currently in the "ftdc_dump_40" branch. To sanity-check run 'git branch' to see this before trying to compile the ftdc_dump program with the commands below.


  Before building you will need to install the same prerequisites that you would for building the core server (see docs/building.md).

  After making sure you have installed the MongoDB source code build prerequisites the ftdc_dump executable using the following command.

  $ buildscripts/scons.py ftdc_dump

  The build is nowhere near as big as it is for the mongod server build but you can add the -j <num_of_cores> option to enable parallelized building to speed it up a little. Also use --disable-warnings-as-errors to allow warnings to stay just as warnings.

  This will create the executable at build/opt/mongo/db/ftdc/ftdc_dump and also install/copy in the top directory.

  (You can build the server code and other utility programs as normal (see the docs/building.md documentation, or the README file in the normal "v4.0" branch) but that is not the point of this branch.)

RUNNING

  For command line options invoke:

    $ ./ftdc_dump --help
    General options:
      --help                      produce a help message
      --input-file arg            path to FTDC directory (typically
                                  "diagnostic.data/") and/or individual
                                  metrics.YYYYMMDD... FTDC metric files. Can be
                                  multiple locations. (It's optional to write
                                  "--input-file", all positional args are used to
                                  be input directories or files.)

    Filter options:
      --ts-start arg              exclude results before this timestamp
      --ts-end arg                exclude results after this timestamp
      --metrics-filter arg        file of metric names to include. (See output of
                                  --list-metrics for samples of format.)

    Print summaries to stdout:
      --print-topology arg (=1)   Print replica sets, hosts, timespans. On by
                                  default.
      --print-metadata-doc        Print last kMetadataDoc BSON object for each db
                                  instance.
      --list-metrics              Print list of all metrics in these FTDC files

    Export options:
      --export-dir arg (=.)       Directory to put exported timeseries metrics
                                  files in. Current working dir is default.
      --bson-timeseries           Export timeseries as BSON file(s)
      --csv-timeseries            Export timeseries as CSV file(s)
      --pandas-csv-timeseries     Export timeseries as Pandas dataframe CSV format.
                                  A *.mapping.csv file is also saved alongside each
                                  data csv file.
      --vm-jsonlines-timeseries   Export jsonlines file(s) that can be imported
                                  into VictoriaMetrics using the /api/v1/import
                                  endpoint.
      --resolution arg (=1)       Resolution in seconds for timeseries output
                                  methods.

LICENSE

  Most MongoDB source files (src/mongo folder and below) are made available
  under the terms of the GNU Affero General Public License (GNU AGPLv3). See
  individual files for details.
